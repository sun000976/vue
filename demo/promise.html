<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>promise</title>
	</head>
	<body>
		<script type="text/javascript">
			let checkLogin = function(){
				return new Promise(function(resolve,reject){
//					let flag = document.cookit.indexOf('userId')>-1?true:false;
					if (flag = true) {
						resolve({
							status:0,
							resule:true
						})
					} else{
						reject('eerror')
					}
					
				})
			}
			
			let getUserIofo = ()=>{
				return new Promise((resolve,reject)=>{
					let userInfo = {
						userId:"101"
					}
					resolve(userInfo)
				})
			}
			/*checkLogin().then(res=>{
				if (res.status == 0) {
					console.log('Login success')
					return getUserIofo()
				}
			}).catch(error=>{
				console.log(`error:${error}`)
			}).then(res2=>{
				console.log(`res2:${res2.userId}`)
			})*/
			
			Promise.all([checkLogin(),getUserIofo()]).then(([res1,res2])=>{
				console.log(`result1:${res1.resule}`)
				console.log(`result2:${res2.userId}`)
			})
		</script>
	</body>
</html>
